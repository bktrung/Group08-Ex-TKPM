<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Quản lý Quy tắc Chuyển trạng thái Sinh viên</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .container {
            max-width: 900px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }

        .btn:hover {
            opacity: 0.9;
        }

        .rule-card {
            margin-bottom: 15px;
            border-radius: 5px;
            border-left: 4px solid #0d6efd;
        }

        .rule-header {
            background-color: #e9ecef;
            padding: 8px 12px;
            margin-bottom: 15px;
            border-radius: 5px;
            font-weight: bold;
        }

        .transition-arrow {
            font-size: 24px;
            margin: 0 10px;
        }

        #rules-container .card {
            margin-bottom: 15px;
        }

        #status-diagram {
            min-height: 300px;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            background-color: white;
        }
    </style>
</head>

<body>
    <div class="container mt-5 mb-5">
        <h2 class="mb-4 text-center">Quản lý Quy tắc Chuyển trạng thái Sinh viên</h2>

        <div class="rule-header">
            Thêm quy tắc chuyển trạng thái mới
        </div>

        <form id="add-rule-form">
            <div class="row mb-3">
                <div class="col-md-5">
                    <label class="form-label">Từ trạng thái</label>
                    <select id="from-status" class="form-select" required>
                        <option value="">-- Chọn trạng thái --</option>
                    </select>
                </div>
                <div class="col-md-2 d-flex align-items-center justify-content-center">
                    <span class="transition-arrow">→</span>
                </div>
                <div class="col-md-5">
                    <label class="form-label">Đến trạng thái</label>
                    <select id="to-status" class="form-select" required>
                        <option value="">-- Chọn trạng thái --</option>
                    </select>
                </div>
            </div>

            <div class="d-grid">
                <button type="submit" class="btn btn-primary">Thêm Quy tắc</button>
            </div>
        </form>

        <div class="rule-header mt-5">
            Quy tắc hiện có
        </div>

        <div id="rules-container">
            <!-- Rules will be displayed here by JavaScript -->
            <div class="text-center py-3 text-muted" id="no-rules-message">
                Chưa có quy tắc nào được thiết lập
            </div>
        </div>

        <div class="rule-header mt-5">
            Sơ đồ chuyển đổi trạng thái
        </div>

        <div id="status-diagram" class="mb-4">
            <div class="text-center py-5 text-muted" id="no-diagram-message">
                Đang tải sơ đồ...
            </div>
        </div>

        <div class="mt-4 d-flex justify-content-between">
            <a href="../index.html" class="btn btn-secondary">Quay lại Trang chủ</a>
        </div>
    </div>

    <script src="../scripts/status_rules.js"></script>

    <!-- Modal báo lỗi -->
    <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title" id="errorModalLabel">Lỗi!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="errorModalMessage">
                    Có lỗi xảy ra!
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal thành công -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="successModalLabel">Thành công!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Thêm quy tắc thành công!
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal xóa -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-warning text-dark">
                    <h5 class="modal-title" id="deleteModalLabel">Xác nhận xóa</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Bạn có chắc chắn muốn xóa quy tắc này không?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-danger" id="confirmDelete">Xóa</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>